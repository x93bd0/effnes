use crate::consts::Flags;

pub type OpCode = u8;

#[derive(Copy, Clone)]
pub enum Mnemonic {
    Adc,
    Anc,
    And,
    Ane,
    Arr,
    Asl,
    Asr,
    Bxx { flag: Flags, set: bool },
    Bit,
    Brk,
    Clx { flag: Flags },
    Cmp,
    Cpx,
    Cpy,
    Dcp,
    Dec,
    Dex,
    Dey,
    Eor,
    Inc,
    Inx,
    Iny,
    Isc,
    Jam,
    Jmp,
    Jsr,
    Las,
    Lax,
    Lda,
    Ldx,
    Ldy,
    Lsr,
    Lxa,
    Nop,
    Ora,
    Pha,
    Php,
    Pla,
    Plp,
    Rla,
    Rol,
    Ror,
    Rra,
    Rti,
    Rts,
    Sax,
    Sbc,
    Sbx,
    Sfx { flag: Flags },
    Sha,
    Shx,
    Shy,
    Slo,
    Sre,
    Sta,
    Stx,
    Sty,
    Tas,
    Tax,
    Tay,
    Tsx,
    Txa,
    Txs,
    Tya,
}

impl From<OpCode> for Mnemonic {
    fn from(opcode: OpCode) -> Self {
        JUMP_TABLE[opcode as usize]
    }
}

use Mnemonic::*;
pub static JUMP_TABLE: [Mnemonic; 256] = [
    Brk,
    Ora,
    Jam,
    Slo,
    Nop,
    Ora,
    Asl,
    Slo,
    Php,
    Ora,
    Asl,
    Anc,
    Nop,
    Ora,
    Asl,
    Slo,
    Bxx {
        flag: Flags::Negative,
        set: false,
    },
    Ora,
    Jam,
    Slo,
    Nop,
    Ora,
    Asl,
    Slo,
    Clx { flag: Flags::Carry },
    Ora,
    Nop,
    Slo,
    Nop,
    Ora,
    Asl,
    Slo,
    Jsr,
    And,
    Jam,
    Rla,
    Bit,
    And,
    Rol,
    Rla,
    Plp,
    And,
    Rol,
    Anc,
    Bit,
    And,
    Rol,
    Rla,
    Bxx {
        flag: Flags::Negative,
        set: false,
    },
    And,
    Jam,
    Rla,
    Nop,
    And,
    Rol,
    Rla,
    Sfx { flag: Flags::Carry },
    And,
    Nop,
    Rla,
    Nop,
    And,
    Rol,
    Rla,
    Rti,
    Eor,
    Jam,
    Sre,
    Nop,
    Eor,
    Lsr,
    Sre,
    Pha,
    Eor,
    Lsr,
    Asr,
    Jmp,
    Eor,
    Lsr,
    Sre,
    Bxx {
        flag: Flags::Overflow,
        set: false,
    },
    Eor,
    Jam,
    Sre,
    Nop,
    Eor,
    Lsr,
    Sre,
    Clx {
        flag: Flags::IntDis,
    },
    Eor,
    Nop,
    Sre,
    Nop,
    Eor,
    Lsr,
    Sre,
    Rts,
    Adc,
    Jam,
    Rra,
    Nop,
    Adc,
    Ror,
    Rra,
    Pla,
    Adc,
    Ror,
    Arr,
    Jmp,
    Adc,
    Ror,
    Rra,
    Bxx {
        flag: Flags::Overflow,
        set: true,
    },
    Adc,
    Jam,
    Rra,
    Nop,
    Adc,
    Ror,
    Rra,
    Sfx {
        flag: Flags::IntDis,
    },
    Adc,
    Nop,
    Rra,
    Nop,
    Adc,
    Ror,
    Rra,
    Nop,
    Sta,
    Nop,
    Sax,
    Sty,
    Sta,
    Stx,
    Sax,
    Dey,
    Nop,
    Txa,
    Ane,
    Sty,
    Sta,
    Stx,
    Sax,
    Bxx {
        flag: Flags::Carry,
        set: false,
    },
    Sta,
    Jam,
    Sha,
    Sty,
    Sta,
    Stx,
    Sax,
    Tya,
    Sta,
    Txs,
    Tas,
    Shy,
    Sta,
    Shx,
    Sha,
    Ldy,
    Lda,
    Ldx,
    Lax,
    Ldy,
    Lda,
    Ldx,
    Lax,
    Tay,
    Lda,
    Tax,
    Lxa,
    Ldy,
    Lda,
    Ldx,
    Lax,
    Bxx {
        flag: Flags::Carry,
        set: true,
    },
    Lda,
    Jam,
    Lax,
    Ldy,
    Lda,
    Ldx,
    Lax,
    Clx {
        flag: Flags::Overflow,
    },
    Lda,
    Tsx,
    Las,
    Ldy,
    Lda,
    Ldx,
    Lax,
    Cpy,
    Cmp,
    Nop,
    Dcp,
    Cpy,
    Cmp,
    Dec,
    Dcp,
    Iny,
    Cmp,
    Dex,
    Sbx,
    Cpy,
    Cmp,
    Dec,
    Dcp,
    Bxx {
        flag: Flags::Zero,
        set: false,
    },
    Cmp,
    Jam,
    Dcp,
    Nop,
    Cmp,
    Dec,
    Dcp,
    Clx {
        flag: Flags::Decimal,
    },
    Cmp,
    Nop,
    Dcp,
    Nop,
    Cmp,
    Dec,
    Dcp,
    Cpx,
    Sbc,
    Nop,
    Isc,
    Cpx,
    Sbc,
    Inc,
    Isc,
    Inx,
    Sbc,
    Nop,
    Sbc,
    Cpx,
    Sbc,
    Inc,
    Isc,
    Bxx {
        flag: Flags::Zero,
        set: true,
    },
    Sbc,
    Jam,
    Isc,
    Nop,
    Sbc,
    Inc,
    Isc,
    Sfx {
        flag: Flags::Decimal,
    },
    Sbc,
    Nop,
    Isc,
    Nop,
    Sbc,
    Inc,
    Isc,
];
